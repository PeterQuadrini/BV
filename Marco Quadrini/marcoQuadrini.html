<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="marcoQuadrini.css">
        <title>Marco Quadrini</title>
    </head>
    <body>
        <!-- <script src="../node_modules/three/build/three.min.js"></script> -->
        <!-- <script src="../node_modules/three/examples/jsm/loaders/GLTFLoader.js"></script> -->
        <script type="module">
            // import * as THREE from "three";
            // import {GLTFLoader} from "../node_modules/three/examples/jsm/loaders/GLTFLoader.js"
            //import {_GLTFLoader} from "../node_modules/three-gltf-loader/index.js"
            // import {GLTFLoader} from 'three-gltf-loader';
            import * as THREE from 'https://cdn.skypack.dev/three@0.129.0/build/three.module.js';
            import { OrbitControls } from 'https://cdn.skypack.dev/three@0.129.0/examples/jsm/controls/OrbitControls.js';
            import { GLTFLoader } from 'https://cdn.skypack.dev/three@0.129.0/examples/jsm/loaders/GLTFLoader.js';
            let scene, camera, renderer, hlight, controls;

            function init() {
                scene = new THREE.Scene();
                scene.background = new THREE.Color(0xff0000);
                camera = new THREE.PerspectiveCamera(40, window.innerWidth/window.innerHeight, 1, 5000);
                camera.rotation.y = 0 * Math.PI;
                camera.rotation.x = -90
                camera.rotation.z = 90

                camera.position.x = 0;
                camera.position.y = 0;
                camera.position.z = -20;

                hlight = new THREE.AmbientLight(0x404040,100);
                //scene.add(hlight);
                let directionalLight = new THREE.DirectionalLight(0x000000, 20);
                directionalLight.position.set(0,1,0);
                directionalLight.castShadow = true;
                //scene.add(directionalLight);
                let light = new THREE.PointLight(0xc4c4c4,1);
                light.position.set(0,300,500);
                scene.add(light);
                let light2 = new THREE.PointLight(0xc4c4c4,1);
                light2.position.set(500,100,0);
                scene.add(light2);
                let light3 = new THREE.PointLight(0xc4c4c4,1);
                light3.position.set(0,100,-500);
                scene.add(light3);
                let light4 = new THREE.PointLight(0xc4c4c4,1);
                light4.position.set(-500,300,0);
                scene.add(light4);
                renderer = new THREE.WebGLRenderer({antialias: true});
                renderer.setSize(window.innerWidth, window.innerHeight);

                controls = new OrbitControls(camera, renderer.domElement);
                controls.update();

                document.body.appendChild(renderer.domElement);

                const loader = new GLTFLoader();
                loader.load('marco.gltf', function(gltf) {
                    let cube  = gltf.scene.children.filter(obj => obj.type === 'Group')[0];
                    console.log(gltf.scene.children)
                    console.log(cube)
                    //cube.scale.set(1,1,1)
                    cube.rotation.set(-180,0,0)
                    scene.add(gltf.scene);
                    animate();
                });
            }
            function animate () {
                controls.update();
                renderer.render(scene,camera);
                requestAnimationFrame(animate);
            }
            init();
			// Our Javascript will go here.
		</script>
    </body>
</html>